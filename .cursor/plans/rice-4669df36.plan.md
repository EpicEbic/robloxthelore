<!-- 4669df36-a899-4d2f-ac01-31e8e1d4d767 e5e1410d-d8be-49a2-81a6-4f4a2da32672 -->
# Implement Rice Farmer Theme with Grain Particles

## Files to Add/Update

- Add `src/data/character-themes/rice-farmer-theme.ts`
- Update `src/data/character-themes/index.ts` to register `'rice-farmer'`
- Update `src/types/character-theme-types.ts` to include `'grain'` in `particles.type`
- Update `src/components/effects/character-particles.tsx` to support `'grain'`
- Update `src/components/effects/dual-character-particles.tsx` to support `'grain'`
- Update `src/styles/character-themes.css` to include `body.character-theme-rice-farmer` block (if following the pattern)

## Theme Details

- id: `rice-farmer`
- name: `Rice Farmer`
- colors:
  - primary: `#7a5a3a` (brown)
  - secondary: `#efe6d3` (pale tan)
  - accent: `#3a7ca5` (blue)
  - background: `#0f0d0a` (very dark brown-black)
  - surface: `#1c1510` (deep brown)
  - text: `#efe6d3` (pale tan)
- gradients:
  - background: `linear-gradient(180deg, #1c1510 0%, #0f0d0a 100%)`
  - card: `linear-gradient(180deg, rgba(122,90,58,0.12) 0%, rgba(15,13,10,0.6) 100%)`
  - accent: `linear-gradient(90deg, #3a7ca5 0%, #7a5a3a 100%)`
- particles:
  - type: `'grain'`
  - color: `#fffaf0` (off-white rice)
  - intensity: `0.8`
  - speed: `0.6`
  - count: `150`
- patterns:
  - type: `'organic'`
  - opacity: `0.08`

## Particle Implementation (new 'grain' type)

- Creation: spawn at random X across canvas, Y near top (some above viewport for stagger); size: width 2–3px, height 5–8px; rotation: random small angle; speed: base `particles.speed` with random variation per particle; slight horizontal drift using Perlin-like noise or small vx jitter.
- Update: increase `y` by `vy * delta`, apply subtle sway to `x`, wrap to top when `y > height` with new random properties. Respect reduced-motion by lowering count/speed.
- Render: draw as rounded rect/rotated capsule (or line) with `fillStyle` = particle color and low opacity; optionally add subtle shadow for visibility on dark backgrounds.

## Essential Snippets (illustrative)

- Type update:
```startLine:endLine:src/types/character-theme-types.ts
// add 'grain' to union types for particles.type
```

- Theme registration:
```startLine:endLine:src/data/character-themes/index.ts
// 'rice-farmer': riceFarmerTheme
```

- Theme object shape:
```typescript
export const riceFarmerTheme: CharacterTheme = { id: 'rice-farmer', name: 'Rice Farmer', colors: { /* ... */ }, gradients: { /* ... */ }, particles: { type: 'grain', color: '#fffaf0', intensity: 0.8, speed: 0.6, count: 150 }, patterns: { type: 'organic', opacity: 0.08 } };
```

- Particle renderer switch additions in both particle files:
```startLine:endLine:src/components/effects/character-particles.tsx
// case 'grain': // create, update, render rotated capsules
```




```startLine:endLine:src/components/effects/dual-character-particles.tsx

// case 'grain': // same as single, per-particle assigned from left/right theme

```

## Notes

- No page changes expected if `CharacterThemeProvider` already receives `characterId='rice-farmer'` via the Entry page; theme will auto-apply.
- CSS body class for `character-theme-rice-farmer` follows existing themes for background fallback.

### To-dos

- [ ] Extend particle type union to include 'grain' in types
- [ ] Add 'grain' create/update/render in character-particles.tsx
- [ ] Add 'grain' create/update/render in dual-character-particles.tsx
- [ ] Create rice-farmer-theme.ts with provided colors/particles
- [ ] Register 'rice-farmer' in character-themes/index.ts
- [ ] Add body.character-theme-rice-farmer styles in character-themes.css